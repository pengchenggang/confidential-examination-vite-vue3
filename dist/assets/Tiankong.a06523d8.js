import{_ as g,u as _,r as c,o as u,c as h,a as m,n as k,f as p,d as a,t as B,g as $,v as b,F as x,b as y,h as F,i as S}from"./index.1d1f8b64.js";const f={name:"InputBm",props:{answer:{type:String,default:""}},components:{},data(){return{isFocus:!1,guaguakaVif:!1,backgroundSizeX:"0px",val1:"",val1Bak:"",val1Bak2:""}},watch:{isFocus(e){e&&(this.$app.inputNextFocus=this.inputNextFocus,this.$app.inputPreviousFocus=this.inputPreviousFocus)},"$app.showOne":function(e){if(this.isFocus){console.info("showOne");const t=this.val1.length;t<this.answer.length?this.val1=this.answer.substr(0,t+1):this.val1=this.answer}},"$app.guaguakaVif":function(e){this.guaguakaVif=e},"$app.clearAnswer":function(e){this.isFocus&&(this.val1!==""?this.val1="":this.inputPreviousFocus())},"$app.clearAnswerAll":function(e){this.val1=""},"$app.clearAnswer":function(e){this.isFocus&&(this.val1!==""?this.val1="":this.inputPreviousFocus())},"$app.showAnswer":function(e){this.isFocus&&(e?(this.val1Bak=this.val1,this.val1=this.answer):this.val1=this.val1Bak)},"$app.showAnswerAll":function(e){e?(this.val1Bak2=this.val1,this.val1=this.answer):this.val1=this.val1Bak2},val1(e){const t=this.$app.showAnswer===!1&&this.$app.showAnswerAll===!1;if(e.toUpperCase()===this.answer&&t&&this.inputNextFocus(),e.length!==0){const s=e.length;e.toUpperCase()===this.answer.substr(0,s)?this.$nextTick(()=>{this.backgroundSizeX=this.$refs.inputSpanRef.offsetWidth+32+10+"px"}):this.backgroundSizeX="0"}else this.backgroundSizeX="0"}},computed:{},methods:{onBlurHandle(){console.info("onBlurHandle"),this.$app.isPhone?(this.$app.showAnswer=!this.$app.showAnswer,this.$nextTick(()=>{this.isFocus=!1})):this.isFocus=!1},onFocusHandle(){console.info("onFocusHandle"),this.isFocus=!0,this.$app.isPhone&&(console.info("isPhone"),this.$nextTick(()=>{this.$app.showAnswer=!this.$app.showAnswer}))},inputNextFocus(){const e=this.$refs.inputBmRef.$el.getElementsByTagName("input")[0],t=document.getElementsByTagName("input");for(let s=0;s<t.length;s++)if(t[s]===e){let n=s+1;if(n<t.length){t[n].type==="checkbox"&&(n+=1),t[n+1]&&t[n+1].focus(),this.$nextTick(()=>{t[n].focus()});break}}},inputPreviousFocus(){const e=this.$refs.inputBmRef.$el.getElementsByTagName("input")[0],t=document.getElementsByTagName("input");for(let s=0;s<t.length;s++)if(t[s]===e&&t[s].type==="text"){let n=s-1;if(n<t.length){t[n].type==="checkbox"&&(n-=1),t[n]&&t[n].focus();break}}}},created(){},activated(){},mounted(){const e=this.$refs.draggerRef;e.onmousedown=function(){var t=window.event,s=t.clientX;t.offsetY;const n=parseInt(e.style.left);document.onmousemove=function(){var i=window.event,l=i.clientX;i.clientY;var r=l-s;e.style.left=n+r+"px"}},window.onmouseup=function(){document.onmousemove=null}},beforeUnmount(){}},w=()=>{_(e=>({"1d14bba2":e.backgroundSizeX}))},v=f.setup;f.setup=v?(e,t)=>(w(),v(e,t)):w;const A=f,I={style:{position:"absolute"}},T={style:{"font-size":"12px","margin-left":"10px"}};function V(e,t,s,n,i,l){const r=c("Input"),d=c("Icon");return u(),h(x,null,[m(r,{modelValue:i.val1,"onUpdate:modelValue":t[0]||(t[0]=o=>i.val1=o),onOnFocus:l.onFocusHandle,onOnBlur:l.onBlurHandle,ref:"inputBmRef",class:k(["inputBmClass",i.val1.toUpperCase()===s.answer?"md-checkbox-outline":"md-code"]),prefix:i.val1.toUpperCase()===s.answer?"md-checkbox-outline":"md-code",style:p({width:this.answer.length*15+15+30+"px"})},null,8,["modelValue","onOnFocus","onOnBlur","class","prefix","style"]),a("span",{ref:"inputSpanRef",style:{"font-size":"14px",position:"absolute",left:"-10000px"}},B(i.val1),513),$(a("span",I,[a("div",{style:p([{position:"relative",overflow:"hidden"},{width:this.answer.length*15+15+30+"px",left:(this.answer.length*15+15+30)*-1+"px"}])},[a("div",{ref:"draggerRef",onselectstart:"return false;",style:p([{width:this.answer.length*15+15+30+"px",left:0},{"background-color":"#f4f5f5",position:"relative",top:"0","z-index":"1",cursor:"pointer","border-radius":"10px"}])},[a("span",T,[m(d,{type:"md-arrow-round-forward"})])],4)],4)],512),[[b,i.guaguakaVif]])],64)}var N=g(A,[["render",V]]);const z={name:"Tiankong",props:{tiankongData:{type:Object,default(){return{text:"def $input",answer:["def"]}}}},components:{InputBm:N},data(){return{text:this.tiankongData.text,answer:this.tiankongData.answer,textSplit:[]}},watch:{tiankongData(e){this.init()}},computed:{},methods:{init(){this.text=this.tiankongData.text,this.answer=this.tiankongData.answer,this.textSplit=this.text.replace(/\n/g,"<br>").split("$input")}},created(){},activated(){},mounted(){this.init()},beforeUnmount(){}},C=["innerHTML"];function D(e,t,s,n,i,l){const r=c("InputBm");return u(!0),h(x,null,y(i.textSplit,(d,o)=>(u(),h("span",{key:o},[a("span",{innerHTML:i.textSplit[o]},null,8,C),i.answer[o]?(u(),F(r,{key:0,answer:i.answer[o]},null,8,["answer"])):S("",!0)]))),128)}var P=g(z,[["render",D]]);export{P as T};
